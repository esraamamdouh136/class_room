/**
 * @ag-grid-enterprise/column-tool-panel - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components * @version v26.0.0
 * @link http://www.ag-grid.com/
' * @license Commercial
 */

/**
 * @ag-grid-enterprise/column-tool-panel - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components * @version v26.0.0
 * @link http://www.ag-grid.com/
' * @license Commercial
 */
import{KeyCode as e,Events as t,_ as o,Autowired as i,RefSelector as n,PostConstruct as s,Component as r,EventService as l,AgCheckbox as a,CssClassApplier as p,Column as c,DragSourceType as d,TouchListener as u,VirtualList as h,PreDestroy as f,OriginalColumnGroup as g,PreConstruct as m,PositionableFeature as y,TabGuardComp as C,ModuleRegistry as v,ModuleNames as E,Bean as D}from"@ag-grid-community/core";import{EnterpriseCoreModule as P}from"@ag-grid-enterprise/core";import{RowGroupDropZonePanel as A,ValuesDropZonePanel as b,PivotDropZonePanel as S,RowGroupingModule as L}from"@ag-grid-enterprise/row-grouping";import{SideBarModule as M}from"@ag-grid-enterprise/side-bar";var O,T,G=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),x=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};!function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED",e[e.INDETERMINATE=2]="INDETERMINATE"}(T||(T={}));var _=function(r){function l(){return r.call(this,l.TEMPLATE)||this}return G(l,r),l.prototype.postConstruct=function(){var o=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(t){t.keyCode===e.SPACE&&o.onExpandClicked()})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return o.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var i=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(i("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(i("ariaFilterColumnsInput","Filter Columns Input"))},l.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},l.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=o.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=o.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=o.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(T.EXPANDED)},l.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),s=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(s("searchOoo","Search...")),o.setDisplayed(this.eFilterTextField.getGui(),e),o.setDisplayed(this.eSelect.getGui(),t),o.setDisplayed(this.eExpand,i&&n)},l.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=o.debounce((function(){var t=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:t})}),l.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},l.prototype.onMiniFilterKeyPress=function(t){var i=this;o.isKeyPressed(t,e.ENTER)&&setTimeout((function(){return i.onSelectClicked()}),l.DEBOUNCE_DELAY)},l.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},l.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===T.EXPANDED?"collapseAll":"expandAll"})},l.prototype.setExpandState=function(e){this.expandState=e,o.setDisplayed(this.eExpandChecked,this.expandState===T.EXPANDED),o.setDisplayed(this.eExpandUnchecked,this.expandState===T.COLLAPSED),o.setDisplayed(this.eExpandIndeterminate,this.expandState===T.INDETERMINATE)},l.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},l.DEBOUNCE_DELAY=300,l.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',x([i("columnModel")],l.prototype,"columnModel",void 0),x([n("eExpand")],l.prototype,"eExpand",void 0),x([n("eSelect")],l.prototype,"eSelect",void 0),x([n("eFilterTextField")],l.prototype,"eFilterTextField",void 0),x([s],l.prototype,"postConstruct",null),l}(r),N=function(){function e(e,t,o,i,n){void 0===i&&(i=!1),this.eventService=new l,this.displayName=e,this.dept=o,this.group=i,i?(this.columnGroup=t,this.expanded=n,this.children=[]):this.column=t}return e.prototype.isGroup=function(){return this.group},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.getColumnGroup=function(){return this.columnGroup},e.prototype.getColumn=function(){return this.column},e.prototype.getDept=function(){return this.dept},e.prototype.isExpanded=function(){return!!this.expanded},e.prototype.getChildren=function(){return this.children},e.prototype.isPassesFilter=function(){return this.passesFilter},e.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:e.EVENT_EXPANDED_CHANGED}))},e.prototype.setPassesFilter=function(e){this.passesFilter=e},e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},e.EVENT_EXPANDED_CHANGED="expandedChanged",e}(),I=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),w=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},V=function(r){function l(e,t,o,i){var n=r.call(this)||this;return n.modelItem=e,n.allowDragging=t,n.eventType=o,n.focusWrapper=i,n.processingColumnStateChange=!1,n.modelItem=e,n.columnGroup=e.getColumnGroup(),n.columnDept=e.getDept(),n.allowDragging=t,n}return I(l,r),l.prototype.init=function(){this.setTemplate(l.TEMPLATE),this.eDragHandle=o.createIconNoSpan("columnDrag",this.gridOptionsWrapper),o.addCssClass(this.eDragHandle,"ag-drag-handle"),o.addCssClass(this.eDragHandle,"ag-column-select-column-group-drag-handle"),this.cbSelect.getGui().insertAdjacentElement("afterend",this.eDragHandle),this.displayName=this.columnModel.getDisplayNameForOriginalColumnGroup(null,this.columnGroup,this.eventType),o.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,a.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,N.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),p.addToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.getGui(),this.gridOptionsWrapper,null,this.columnGroup)},l.prototype.setupTooltip=function(){var e=this,o=this.columnGroup.getColGroupDef();if(o){var i=function(){var t=o.headerTooltip;e.setTooltip(t)};i(),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,i)}},l.prototype.getTooltipParams=function(){var e=r.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},l.prototype.handleKeyDown=function(t){switch(t.keyCode){case e.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case e.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case e.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},l.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach((function(t){e.addManagedListener(t,c.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))}))},l.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t={type:d.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))}else o.setDisplayed(this.eDragHandle,!1)},l.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach((function(t){e[t.getId()]=t.isVisible()})),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},l.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(o.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(o.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new u(this.eColumnGroupIcons,!0);this.addManagedListener(e,u.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},l.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},l.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},l.prototype.getVisibleLeafColumns=function(){var e=[],t=function(o){o.forEach((function(o){o.isPassesFilter()&&(o.isGroup()?t(o.getChildren()):e.push(o.getColumn()))}))};return t(this.modelItem.getChildren()),e},l.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},l.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaColumnGroupToggleVisibility","column group toggle visibility");o.setAriaLabel(this.focusWrapper,this.displayName+" "+i+" ("+t+")")},l.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),o.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1},l.prototype.workOutSelectedValue=function(){var e=this,t=this.columnModel.isPivotMode(),o=this.getVisibleLeafColumns(),i=0,n=0;return o.forEach((function(o){!t&&o.getColDef().lockVisible||(e.isColumnChecked(o,t)?i++:n++)})),i>0&&n>0?void 0:i>0},l.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),t=0;return this.columnGroup.getLeafColumns().forEach((function(o){e?o.isAnyFunctionAllowed()&&t++:o.getColDef().lockVisible||t++})),0===t},l.prototype.isColumnChecked=function(e,t){if(t){var o=e.isPivotActive(),i=e.isRowGroupActive(),n=e.isValueActive();return o||i||n}return e.isVisible()},l.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},l.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},l.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();o.setDisplayed(this.eGroupClosedIcon,!e),o.setDisplayed(this.eGroupOpenedIcon,e)},l.prototype.refreshAriaExpanded=function(){o.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},l.prototype.getDisplayName=function(){return this.displayName},l.prototype.onSelectAllChanged=function(e){var t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()},l.prototype.isSelected=function(){return this.cbSelect.getValue()},l.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},l.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},l.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',w([i("columnModel")],l.prototype,"columnModel",void 0),w([i("dragAndDropService")],l.prototype,"dragAndDropService",void 0),w([i("modelItemUtils")],l.prototype,"modelItemUtils",void 0),w([n("cbSelect")],l.prototype,"cbSelect",void 0),w([n("eLabel")],l.prototype,"eLabel",void 0),w([n("eGroupOpenedIcon")],l.prototype,"eGroupOpenedIcon",void 0),w([n("eGroupClosedIcon")],l.prototype,"eGroupClosedIcon",void 0),w([n("eColumnGroupIcons")],l.prototype,"eColumnGroupIcons",void 0),w([s],l.prototype,"init",null),l}(r),F=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),R=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},H=function(r){function l(e,t,o,i,n){var s=r.call(this)||this;return s.column=e,s.columnDept=t,s.allowDragging=o,s.groupsExist=i,s.focusWrapper=n,s.processingColumnStateChange=!1,s}return F(l,r),l.prototype.init=function(){this.setTemplate(l.TEMPLATE),this.eDragHandle=o.createIconNoSpan("columnDrag",this.gridOptionsWrapper),o.addCssClass(this.eDragHandle,"ag-drag-handle"),o.addCssClass(this.eDragHandle,"ag-column-select-column-drag-handle"),this.cbSelect.getGui().insertAdjacentElement("afterend",this.eDragHandle),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var e=o.escapeString(this.displayName);this.eLabel.innerHTML=e;var i=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+i),this.setupDragging(),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,a.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),p.addToolPanelClassesFromColDef(this.column.getColDef(),this.getGui(),this.gridOptionsWrapper,this.column,null)},l.prototype.setupTooltip=function(){var e=this,o=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};o(),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,o)},l.prototype.getTooltipParams=function(){var e=r.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},l.prototype.handleKeyDown=function(t){t.keyCode===e.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},l.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},l.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},l.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},l.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaColumnToggleVisibility","column toggle visibility");o.setAriaLabel(this.focusWrapper,this.displayName+" "+i+" ("+t+")")},l.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t={type:d.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(t)}))}else o.setDisplayed(this.eDragHandle,!1)},l.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},l.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e,t=this.columnModel.isPivotMode();if(t){var i=this.column.isAnyFunctionActive();this.cbSelect.setValue(i)}else this.cbSelect.setValue(this.column.isVisible());if(t){var n=this.gridOptionsWrapper.isFunctionsReadOnly(),s=!this.column.isAnyFunctionAllowed();e=n||s}else e=!!this.column.getColDef().lockVisible;this.cbSelect.setReadOnly(e),o.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-readonly",e);var r=t&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(r),this.processingColumnStateChange=!1},l.prototype.getDisplayName=function(){return this.displayName},l.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},l.prototype.isSelected=function(){return this.cbSelect.getValue()},l.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},l.prototype.isExpandable=function(){return!1},l.prototype.setExpanded=function(e){console.warn("ag-grid: can not expand a column item that does not represent a column group header")},l.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',R([i("columnModel")],l.prototype,"columnModel",void 0),R([i("dragAndDropService")],l.prototype,"dragAndDropService",void 0),R([i("modelItemUtils")],l.prototype,"modelItemUtils",void 0),R([n("eLabel")],l.prototype,"eLabel",void 0),R([n("cbSelect")],l.prototype,"cbSelect",void 0),R([s],l.prototype,"init",null),l}(r),k=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),U=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},W=function(){function e(e){this.items=e}return e.prototype.getRowCount=function(){return this.items.length},e.prototype.getRow=function(e){return this.items[e]},e}(),j=function(e){function n(){var t=e.call(this,n.TEMPLATE)||this;return t.destroyColumnItemFuncs=[],t}return k(n,e),n.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(e){return e()})),this.destroyColumnItemFuncs=[]},n.prototype.init=function(e,o,i){var n=this;this.params=e,this.allowDragging=o,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,t.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[t.EVENT_COLUMN_PIVOT_CHANGED,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,t.EVENT_COLUMN_ROW_GROUP_CHANGED,t.EVENT_COLUMN_VALUE_CHANGED,t.EVENT_COLUMN_VISIBLE,t.EVENT_NEW_COLUMNS_LOADED].forEach((function(e){n.addManagedListener(n.eventService,e,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new h("column-select","tree")),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(e,t){return n.createComponentFromItem(e,t)})),this.columnModel.isReady()&&this.onColumnsChanged()},n.prototype.createComponentFromItem=function(e,t){if(e.isGroup()){var o=new V(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(o),o}var i=new H(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);return this.getContext().createBean(i),i},n.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},n.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();o&&(e[o.getId()]=t.isExpanded())}})),e},n.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();if(o){var i=e[o.getId()];null!=i&&t.setExpanded(i)}}}))},n.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},n.prototype.setColumnLayout=function(e){var t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some((function(e){return e&&void 0!==e.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},n.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},n.prototype.buildListModel=function(e){var t=this,o=this.onColumnExpanded.bind(this),i=function(e,t,o){e.forEach((function(e){e instanceof g?n(e,t,o):s(e,t,o)}))},n=function(e,n,s){var r=e.getColGroupDef();if(!(r&&r.suppressColumnsToolPanel))if(e.isPadding())i(e.getChildren(),n,s);else{var l=t.columnModel.getDisplayNameForOriginalColumnGroup(null,e,t.eventType),a=new N(l,e,n,!0,t.expandGroupsByDefault);s.push(a),function(e){e.addEventListener(N.EVENT_EXPANDED_CHANGED,o);var i=e.removeEventListener.bind(e,N.EVENT_EXPANDED_CHANGED,o);t.destroyColumnItemFuncs.push(i)}(a),i(e.getChildren(),n+1,a.getChildren())}},s=function(e,o,i){if(!(e.getColDef()&&e.getColDef().suppressColumnsToolPanel)){var n=t.columnModel.getDisplayNameForColumn(e,"columnToolPanel");i.push(new N(n,e,o))}};this.destroyColumnTree(),i(e,0,this.allColsTree)},n.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},n.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var t=function(o){o.isPassesFilter()&&(e.displayedColsList.push(o),o.isGroup()&&o.isExpanded()&&o.getChildren().forEach(t))};this.allColsTree.forEach(t),this.virtualList.setModel(new W(this.displayedColsList));var o=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=o&&this.focusRowIfAlive(o),this.notifyListeners()},n.prototype.focusRowIfAlive=function(e){var t=this;window.setTimeout((function(){t.isAlive()&&t.virtualList.focusRow(e)}),0)},n.prototype.forEachItem=function(e){var t=function(o){o.forEach((function(o){e(o),o.isGroup()&&t(o.getChildren())}))};t(this.allColsTree)},n.prototype.doSetExpandedAll=function(e){this.forEachItem((function(t){t.isGroup()&&t.setExpanded(e)}))},n.prototype.setGroupsExpanded=function(e,t){if(t){var i=[];this.forEachItem((function(o){if(o.isGroup()){var n=o.getColumnGroup().getId();t.indexOf(n)>=0&&(o.setExpanded(e),i.push(n))}}));var n=t.filter((function(e){return!o.includes(i,e)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(e)},n.prototype.getExpandState=function(){var e=0,t=0;return this.forEachItem((function(o){o.isGroup()&&(o.isExpanded()?e++:t++)})),e>0&&t>0?T.INDETERMINATE:t>0?T.COLLAPSED:T.EXPANDED},n.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},n.prototype.getSelectionState=function(){var e=0,t=0,o=this.columnModel.isPivotMode();if(this.forEachItem((function(i){if(!i.isGroup()&&i.isPassesFilter()){var n,s=i.getColumn(),r=s.getColDef();if(o){if(!s.isAllowPivot()&&!s.isAllowRowGroup()&&!s.isAllowValue())return;n=s.isValueActive()||s.isPivotActive()||s.isRowGroupActive()}else{if(r.lockVisible)return;n=s.isVisible()}n?e++:t++}})),!(e>0&&t>0))return!(0===e||t>0)},n.prototype.setFilterText=function(e){this.filterText=o.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},n.prototype.markFilteredColumns=function(){var e=this,t=function(t){if(!o.exists(e.filterText))return!0;var i=t.getDisplayName();return null==i||-1!==i.toLowerCase().indexOf(e.filterText)},i=function(e,o){var n=!1;if(e.isGroup()){var s=t(e);e.getChildren().forEach((function(e){var t=i(e,s||o);t&&(n=t)}))}var r=!(!o&&!n)||t(e);return e.setPassesFilter(r),r};this.allColsTree.forEach((function(e){return i(e,!1)}))},n.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},n.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},n.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},n.TEMPLATE='<div class="ag-column-select-list" role="tree"></div>',U([i("columnModel")],n.prototype,"columnModel",void 0),U([i("toolPanelColDefService")],n.prototype,"colDefService",void 0),U([i("columnApi")],n.prototype,"columnApi",void 0),U([i("modelItemUtils")],n.prototype,"modelItemUtils",void 0),U([f],n.prototype,"destroyColumnTree",null),n}(r),B=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),Z=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},X=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return B(o,e),o.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},o.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,a.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},o.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var t=this.gridOptionsWrapper.getApi();t&&t.refreshHeader()}},o.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},Z([i("columnModel")],o.prototype,"columnModel",void 0),Z([n("cbPivotMode")],o.prototype,"cbPivotMode",void 0),Z([m],o.prototype,"init",null),o}(r),K=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),z=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},Q=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return K(t,e),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,t,o){this.allowDragging=e,this.params=t,this.eventType=o,this.primaryColsHeaderPanel.init(this.params);var i=this.params.suppressColumnFilter,n=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&i&&n&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new y(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',z([n("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),z([n("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),z([s],t.prototype,"postConstruct",null),t}(C),Y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),q=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},J=function(e){function n(){var t=e.call(this,n.TEMPLATE)||this;return t.initialised=!1,t.childDestroyFuncs=[],t}return Y(n,e),n.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},n.prototype.init=function(e){var i=this,n={suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(o.mergeDeep(n,e),this.params=n,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new X),this.childDestroyFuncs.push((function(){return i.destroyBean(i.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Q),this.childDestroyFuncs.push((function(){return i.destroyBean(i.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),o.addCssClass(this.primaryColsPanel.getGui(),"ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new A(!1)),this.childDestroyFuncs.push((function(){return i.destroyBean(i.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new b(!1)),this.childDestroyFuncs.push((function(){return i.destroyBean(i.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new S(!1)),this.childDestroyFuncs.push((function(){return i.destroyBean(i.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var s=this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){i.resetChildrenHeight(),i.setLastVisible()}));this.childDestroyFuncs.push((function(){return s()}))}this.initialised=!0},n.prototype.setPivotModeSectionVisible=function(e){var t=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new X),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)}))),this.setLastVisible())},n.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new A(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},n.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new b(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},n.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new S(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},n.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(e){if(e){var t=e.getGui();e.toggleResizable(!o.containsClass(t,"ag-last-column-drop")&&!o.containsClass(t,"ag-hidden"))}}))},n.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach((function(e){return o.removeCssClass(e,"ag-last-column-drop")}));var t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=o.last(t);i&&o.addCssClass(i,"ag-last-column-drop"),this.setResizers()},n.prototype.resetChildrenHeight=function(){for(var e=this.getGui().children,t=0;t<e.length;t++){var o=e[t];o.style.removeProperty("height"),o.style.removeProperty("flex")}},n.prototype.isRowGroupingModuleLoaded=function(){return v.assertRegistered(E.RowGroupingModule,"Row Grouping")},n.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},n.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},n.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},n.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},n.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(e){return e()})),this.childDestroyFuncs.length=0,o.clearElement(this.getGui())},n.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},n.prototype.destroy=function(){this.destroyChildren(),e.prototype.destroy.call(this)},n.TEMPLATE='<div class="ag-column-panel"></div>',q([i("gridApi")],n.prototype,"gridApi",void 0),q([i("columnApi")],n.prototype,"columnApi",void 0),n}(r),$=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},ee=function(){function e(){}return e.prototype.selectAllChildren=function(e,t,o){var i=this.extractAllLeafColumns(e);this.setAllColumns(i,t,o)},e.prototype.setColumn=function(e,t,o){this.setAllColumns([e],t,o)},e.prototype.setAllColumns=function(e,t,o){this.columnModel.isPivotMode()?this.setAllPivot(e,t,o):this.setAllVisible(e,t,o)},e.prototype.extractAllLeafColumns=function(e){var t=[],o=function(e){e.forEach((function(e){e.isPassesFilter()&&(e.isGroup()?o(e.getChildren()):t.push(e.getColumn()))}))};return o(e),t},e.prototype.setAllVisible=function(e,t,o){var i=[];e.forEach((function(e){e.getColDef().lockVisible||e.isVisible()!=t&&i.push({colId:e.getId(),hide:!t})})),i.length>0&&this.columnModel.applyColumnState({state:i},o)},e.prototype.setAllPivot=function(e,t,o){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,o)},e.prototype.setAllPivotPassive=function(e,i){var n=this.columnModel.getPivotColumns().slice(),s=this.columnModel.getValueColumns().slice(),r=this.columnModel.getRowGroupColumns().slice(),l=!1,a=!1,p=!1,c=i?function(e){e.isAnyFunctionActive()||(e.isAllowValue()?(s.push(e),a=!0):e.isAllowRowGroup()?(r.push(e),l=!0):e.isAllowPivot()&&(n.push(e),p=!0))}:function(e){e.isAnyFunctionActive()&&(n.indexOf(e)>=0&&(o.removeFromArray(n,e),l=!0),s.indexOf(e)>=0&&(o.removeFromArray(s,e),a=!0),r.indexOf(e)>=0&&(o.removeFromArray(r,e),p=!0))};if(e.forEach(c),l){var d={type:t.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:n,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(d)}if(p){var u={type:t.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:r,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(u)}if(a){var h={type:t.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:r,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(h)}},e.prototype.setAllPivotActive=function(e,t,o){var i=this,n=[],s=t?function(e){if(!e.isAnyFunctionActive())if(e.isAllowValue()){var t="string"==typeof e.getAggFunc()?e.getAggFunc():i.aggFuncService.getDefaultAggFunc(e);n.push({colId:e.getId(),aggFunc:t})}else e.isAllowRowGroup()?n.push({colId:e.getId(),rowGroup:!0}):e.isAllowPivot()&&n.push({colId:e.getId(),pivot:!0})}:function(e){(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&n.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};e.forEach(s),n.length>0&&this.columnModel.applyColumnState({state:n},o)},$([i("aggFuncService")],e.prototype,"aggFuncService",void 0),$([i("columnModel")],e.prototype,"columnModel",void 0),$([i("gridOptionsWrapper")],e.prototype,"gridOptionsWrapper",void 0),$([i("columnApi")],e.prototype,"columnApi",void 0),$([i("gridApi")],e.prototype,"gridApi",void 0),$([i("eventService")],e.prototype,"eventService",void 0),e=$([D("modelItemUtils")],e)}(),te={moduleName:E.ColumnToolPanelModule,beans:[ee],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:_},{componentName:"AgPrimaryColsList",componentClass:j},{componentName:"AgPrimaryCols",componentClass:Q}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:J}],dependantModules:[P,L,M]};export{te as ColumnsToolPanelModule,Q as PrimaryColsPanel};