<div class="d-flex justify-content-between align-items-center dialog-head">
    <h2 mat-dialog-title class="mb-0">
        {{ ('setting.ledger' | translate) }}
    </h2>
    <i class="fas fa-times" mat-dialog-close></i>
</div>
<div class="">
<div class="scroll mat-typography p-5">
    <form [formGroup]="form">
        <div class="form-row">
            <div class="col-md-6 mb-4">
                <div class="form-group ">
                <label for="code"> {{'general.account' | translate}} </label>
                    <input type="text" [placeholder]="'general.account' | translate" aria-label="Number"
                        class="form-control" formControlName="account" [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                            {{option?.nodeName}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.cost_center' | translate}}
                    </label>
                    <ng-select  formControlName="costCenter" [items]="costCenters" bindLabel="name" bindValue="id"
                        [placeholder]="'general.cost_center' | translate">
                    </ng-select>
                </div>
            </div>



            <div class="col-md-6">

                <div class="form-group">
                    <label class="font-bold font-14 mb-0 text-nowrap">
                        {{'general.startData' | translate}} :
                        <span class="text-danger">*</span>
                    </label>
                    <mat-form-field floatLabel="never" class="date-form cursor-pointer" (click)="picker.open()">
                        <input dir="auto" style="cursor:none" readonly matInput [matDatepicker]="picker"
                            [placeholder]="'setting.usersPage.chooseDate' | translate" formControlName="start_at">
                        <mat-datepicker-toggle matSuffix (click)="picker.open()"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>


            <div class="col-md-6">

                <div class="form-group">
                    <label class="font-bold font-14 mb-0 text-nowrap">
                        {{'general.endData' | translate}} :
                        <span class="text-danger">*</span>
                    </label>
                    <mat-form-field floatLabel="never" class="date-form cursor-pointer" (click)="picker2.open()">
                        <input dir="auto" matInput [matDatepicker]="picker2"
                            [placeholder]="'setting.usersPage.chooseDate' | translate"
                            [min]="form.get('start_at').value" formControlName="end_at" (click)="picker2.open()">
                        <mat-datepicker-toggle matSuffix (click)="picker2.open()"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
            </div>



            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.father' | translate}}
                    </label>
                    <ng-select  formControlName="father_id" [items]="fathers" bindLabel="name" bindValue="id"
                        [placeholder]="'general.father' | translate" (change)="selectFather($event)">
                    </ng-select>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.student' | translate}}
                    </label>
                    <ng-select  formControlName="student_id" [items]="students" bindLabel="name" bindValue="id"
                        [placeholder]="'general.student' | translate">
                    </ng-select>
                </div>
            </div>


            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.Areas' | translate}}
                    </label>
                    <ng-select  formControlName="cost_center_region_id" [items]="areas" bindLabel="name" bindValue="id"
                        [placeholder]="'general.Areas' | translate" (change)="onSelectArea($event)">
                    </ng-select>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.Branches' | translate}}
                    </label>
                    <ng-select  formControlName="cost_center_branch_id" [items]="branches" bindLabel="name"
                        bindValue="id" [placeholder]="'general.Branches' | translate">
                    </ng-select>
                </div>
            </div>
            
            <div class="col-md-6 mb-4">
                <div class="form-group">
                    <label for="title_ar">
                        {{'general.currency' | translate}}
                    </label>
                    <ng-select  formControlName="currency_id" [items]="currencies" bindLabel="name"
                        bindValue="id" [placeholder]="'general.currency' | translate">
                    </ng-select>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="form-group ">
                    <label for="code"> تحليلي </label>
                    <input type="text" [placeholder]="'تحليلي'" aria-label="Number" class="form-control"
                        formControlName="tag">
                </div>
            </div>

        </div>
    </form>
</div>
</div>


<mat-dialog-actions class="d-flex justify-content-center dialog-actions">
    <div class="d-flex align-items-center justify-content-lg-around justify-content-center flex-wrap">
        <button (click)="onSubmit()" mat-button class="btn btn-success save mx-4 mb-lg-0 mb-3"
            [disabled]="form.invalid">
            {{'general.showLedger' | translate}}
        </button>
        <!-- <button mat-button mat-dialog-close class="btn btn-success cancel mx-4 mb-lg-0 mb-3">
            {{'setting.cancel' | translate}}
        </button> -->
    </div>
</mat-dialog-actions>